---
id: ADR-009
title: "Markdown Frontmatter as Governance Artifact Format"
status: accepted
category: architecture
scope: "packages/delivery-framework"
created: "2026-02-06"
updated: "2026-02-06"
author: "Katalyst Team"
supersedes: ""
superseded_by: ""
---

# ADR-009: Markdown Frontmatter as Governance Artifact Format

## Status

**Accepted** - 2026-02-06

## Context

The delivery framework manages 7+ types of governance artifacts (capabilities, personas, user stories, ROAD items, ADRs, NFRs, change entries) plus 4 DDD artifact types (bounded contexts, aggregates, value objects, domain events). Each artifact needs:

1. **Structured metadata** (IDs, statuses, cross-references, dates) for programmatic processing
2. **Human-readable content** (descriptions, rationale, acceptance criteria) for documentation
3. **Version control** via git (trackable diffs, blame, history)
4. **AI agent accessibility** (agents must be able to read, create, and modify artifacts)
5. **Docusaurus rendering** (artifacts must render as documentation pages)
6. **Validation** against Zod schemas at build time

## Decision

All governance and DDD artifacts are stored as **markdown files with YAML frontmatter**. The frontmatter contains structured metadata; the markdown body contains human-readable content.

Format:
```markdown
---
id: ROAD-001
title: "Import Governance Infrastructure"
status: implementing
phase: 0
priority: high
created: "2026-02-05"
governance:
  adrs:
    validated: false
    ids: []
  bdd:
    status: draft
    feature_files: []
  nfrs:
    applicable: []
---

# ROAD-001: Import Governance Infrastructure

## Summary
...
```

Key aspects:
- Frontmatter fields follow `snake_case` convention (YAML standard)
- Parsers (ROAD-004) transform to `camelCase` TypeScript objects
- Cross-references use typed ID strings (e.g., `CAP-001`, `ROAD-002`, `ADR-003`)
- Referential integrity validated at index build time, not per-file
- The `gray-matter` library extracts frontmatter from markdown files

## Consequences

### Positive

- Git-native: every change is a commit with full diff, blame, and history
- Human-readable: developers can read and edit artifacts without special tooling
- AI-friendly: agents can parse YAML frontmatter and markdown body directly
- Docusaurus renders markdown files as documentation pages automatically
- Cross-references are plain strings that can be grep'd and validated
- No database required for governance state storage

### Negative

- YAML parsing is error-prone (indentation-sensitive, type coercion gotchas)
- No referential integrity at the file level (a file can reference a non-existent ID)
- Concurrent edits can cause merge conflicts in frontmatter
- Schema evolution requires migrating existing files (no database migration tool)
- Query capabilities are limited compared to a database (no SQL joins)

### Neutral

- The `gray-matter` npm package handles YAML frontmatter extraction
- Parsers validate frontmatter against Zod schemas (ADR-002) and transform field names
- The governance index builder (ROAD-004) validates cross-references across all files
- Index output (`governance-index.json`) provides the "queryable" representation

## Alternatives Considered

### Alternative 1: Database-First (SQLite/PostgreSQL)

**Description**: Store artifacts in a database; generate markdown for documentation.

**Pros**:
- Referential integrity enforced by database constraints
- Rich query capabilities (SQL joins, aggregations)
- Concurrent access handled by database

**Cons**:
- Not git-native: changes aren't tracked as file diffs
- Requires a running database for development
- AI agents would need database access instead of filesystem
- Documentation generation becomes a build step
- Breaks the self-governing filesystem model

**Why Rejected**: The governance system's core principle is that the filesystem is the source of truth. Agents read and write markdown files; a database intermediary would add complexity and break the direct feedback loop.

### Alternative 2: JSON Files

**Description**: Store artifacts as pure JSON files instead of markdown with frontmatter.

**Pros**:
- No YAML parsing ambiguity
- Natively parseable by JavaScript/TypeScript
- Schema validation via JSON Schema widely supported

**Cons**:
- Not human-readable (no prose content alongside metadata)
- Cannot render as Docusaurus pages without transformation
- Merge conflicts in JSON are harder to resolve than markdown
- No markdown body for descriptions, rationale, etc.

**Why Rejected**: JSON is metadata-only; it cannot combine structured data with rich prose content. Governance artifacts need both (e.g., an ADR needs structured status fields and a narrative context/decision/consequences section).

### Alternative 3: YAML-Only Files

**Description**: Use pure YAML files without markdown body.

**Pros**:
- Simpler parsing (no frontmatter extraction needed)
- Structured throughout

**Cons**:
- YAML is poor for long-form text (descriptions, rationale, acceptance criteria)
- Cannot render as documentation pages without transformation
- Multi-line strings in YAML are error-prone

**Why Rejected**: Governance artifacts require extensive prose (context sections, technical approaches, risk assessments). YAML's multi-line string handling is awkward for this purpose.

## Implementation Notes

- `gray-matter` extracts frontmatter as an object and body as a string
- Parsers in `@foe/field-guide-tools/src/parsers/governance/` validate frontmatter against Zod schemas
- `snake_case` â†’ `camelCase` transformation happens in parsers, not schemas
- The index builder traverses all artifact directories, parses each file, and builds a unified `governance-index.json`
- Docusaurus reads markdown files directly for page rendering; the index is for programmatic access

## References

- [gray-matter](https://github.com/jonschlinkert/gray-matter)
- [ROAD Template](../roads/ROAD-TEMPLATE.md)
- [ADR Template](./ADR-TEMPLATE.md)
- [NFR Template](../nfr/NFR-TEMPLATE.md)
- [Parsers Plan](../plans/parsers-and-builders.md)

## Compliance

This ADR affects the following areas:
- **Road Items**: ROAD-002, ROAD-003, ROAD-004, ROAD-008
- **NFRs**: NFR-MAINT-001 (Cross-Reference Referential Integrity)
- **BDD Scenarios**: Governance validation feature files

---

**Template Version**: 1.0.0
**Last Updated**: 2026-02-06

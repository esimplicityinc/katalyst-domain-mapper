---
id: US-051
title: "Map System Capabilities to Taxonomy Nodes"
persona: PER-002
status: draft
capabilities:
  - CAP-013
use_cases: []
acceptance_criteria:
  - "Platform engineer can POST to /api/v1/taxonomy/capabilities to create a capability"
  - "Platform engineer can POST to /api/v1/taxonomy/capability-rels to link capability to node"
  - "Capability includes name, description, categories, dependencies"
  - "Capability relationship includes node, relationshipType (supports/depends-on/implements/enables), capabilities"
  - "API validates that node and capability references exist"
  - "API returns 201 Created with the full objects"
  - "Relationships can be queried by node or capability"
---

# US-051: Map System Capabilities to Taxonomy Nodes

**As a** Platform Engineer,
**I want to** map governance capabilities to taxonomy nodes with relationship types,
**so that** I can track which systems support which features and identify capability coverage gaps.

## Context

Governance capabilities (CAP-001, CAP-002, etc.) describe system features. Platform engineers need to map these to taxonomy nodes (systems/subsystems) to:
- Track which systems provide which capabilities
- Identify capability gaps (features with no implementing system)
- Plan capability migration (moving features between systems)
- Generate architecture diagrams showing capability distribution

## Road Items

- **ROAD-041** (Taxonomy CRUD Operations) — Implements capability and relationship CRUD

## Acceptance Criteria

1. Create capabilities via `POST /api/v1/taxonomy/capabilities`
2. Required fields: name, description
3. Optional fields: categories, dependsOnCapabilities
4. Create relationships via `POST /api/v1/taxonomy/capability-rels`
5. Relationship fields: name, node, relationshipType, capabilities
6. Relationship types: supports, depends-on, implements, enables
7. API validates node exists
8. API validates all capability references exist
9. Returns 400 if validation fails

## Example: Define Capability

```json
POST /api/v1/taxonomy/capabilities

{
  "name": "user-auth",
  "description": "User authentication and authorization",
  "categories": ["security", "identity"],
  "dependsOnCapabilities": ["session-management"]
}
```

## Example: Link Capability to Node

```json
POST /api/v1/taxonomy/capability-rels

{
  "name": "katalyst-supports-user-auth",
  "node": "katalyst",
  "relationshipType": "supports",
  "capabilities": ["user-auth", "api-gateway"]
}
```

## Relationship Types

| Type | Meaning | Example |
|------|---------|---------|
| **supports** | Node provides this capability | `katalyst` supports `user-auth` |
| **depends-on** | Node requires this capability | `analytics` depends-on `user-auth` |
| **implements** | Node implements this capability | `auth-service` implements `user-auth` |
| **enables** | Node enables this capability | `api-gateway` enables `rate-limiting` |

## Use Cases

1. **Coverage Report**: Which capabilities have no implementing systems?
2. **Dependency Analysis**: Which systems depend on `user-auth`?
3. **Migration Planning**: Move `user-auth` from `katalyst` to `auth-service`
4. **Architecture Diagrams**: Visualize capability distribution

## Related Stories

- **US-049** (Add Systems to Taxonomy) — Creates nodes
- **US-052** (Configure Environments) — Uses capabilities in environment config

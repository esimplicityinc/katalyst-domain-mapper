---
id: US-053
title: "Define Automation Actions and Pipeline Tools"
persona: PER-002
status: draft
capabilities:
  - CAP-013
use_cases: []
acceptance_criteria:
  - "Platform engineer can POST to /api/v1/taxonomy/actions to create an action"
  - "Action includes name, actionType (shell/http/workflow), layerType, tags"
  - "API validates layerType reference exists (if provided)"
  - "Platform engineer can POST to /api/v1/taxonomy/tools to create a tool"
  - "Tool includes name, description, actions (array of action names)"
  - "API validates all action references exist"
  - "Tools can be queried and used in CI/CD pipelines"
---

# US-053: Define Automation Actions and Pipeline Tools

**As a** Platform Engineer,
**I want to** define automation actions (shell commands, HTTP calls, workflows) and tools (kubectl, docker, helm) via API,
**so that** I can codify CI/CD pipelines and automation workflows in the taxonomy.

## Context

CI/CD pipelines consist of actions (build, test, deploy) executed by tools (kubectl, docker, terraform). Platform engineers need to:
- Define reusable actions with clear metadata
- Group actions into tools for discoverability
- Reference layer types to indicate which layer an action affects
- Tag actions for filtering and categorization

## Road Items

- **ROAD-041** (Taxonomy CRUD Operations) — Implements action and tool CRUD

## Acceptance Criteria

1. Create actions via `POST /api/v1/taxonomy/actions`
2. Action fields: name, actionType (shell/http/workflow), layerType (optional), tags
3. API validates layerType reference exists (if provided)
4. Returns 400 if layerType doesn't exist
5. Create tools via `POST /api/v1/taxonomy/tools`
6. Tool fields: name, description, actions (array of action names)
7. API validates all action references exist
8. Returns 400 if action reference is invalid

## Example: Define Action

```json
POST /api/v1/taxonomy/actions

{
  "name": "deploy-api",
  "actionType": "shell",
  "layerType": "application",
  "tags": ["deployment", "api", "kubernetes"]
}
```

## Example: Define Tool

```json
POST /api/v1/taxonomy/tools

{
  "name": "kubectl",
  "description": "Kubernetes CLI tool for deployment and management",
  "actions": ["deploy-api", "rollback", "scale-replicas"]
}
```

## Action Types

| Type | Description | Example |
|------|-------------|---------|
| **shell** | Execute shell command | `kubectl apply -f deployment.yaml` |
| **http** | HTTP API call | `POST https://api.katalyst.io/deploy` |
| **workflow** | Orchestrate multiple actions | Deploy → Test → Smoke Test → Notify |

## Use Cases

1. **CI/CD Automation**: Reference actions in GitHub Actions workflows
2. **Self-Service Deployments**: Developers trigger actions via UI
3. **Documentation**: Generate runbooks from action definitions
4. **Discoverability**: Search for deployment actions by tag

## Example CI/CD Integration

```yaml
# .github/workflows/deploy.yml
name: Deploy API
on: push
jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Get deployment action
        run: |
          curl https://api.katalyst.io/taxonomy/actions/deploy-api
          # Returns action metadata with layerType, tags, etc.
      
      - name: Execute deployment
        run: kubectl apply -f deployment.yaml
```

## Related Stories

- **US-050** (Define Layer Standards) — Actions reference layer types
- **US-052** (Configure Environments) — Actions target specific environments

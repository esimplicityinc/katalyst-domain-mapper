---
id: US-050
title: "Define Canonical Architectural Layer Standards"
persona: PER-002
status: draft
capabilities:
  - CAP-013
use_cases: []
acceptance_criteria:
  - "Platform engineer can POST to /api/v1/taxonomy/layer-types to create a layer type"
  - "Layer type includes name, description, defaultLayerDir"
  - "API returns 201 Created with the full layer type object"
  - "Layer types can be queried via GET /api/v1/taxonomy/layer-types"
  - "Actions can reference layer types via layerType field"
  - "API prevents deletion of layer types referenced by actions"
  - "Layer types define organization-wide architectural standards"
---

# US-050: Define Canonical Architectural Layer Standards

**As a** Platform Engineer,
**I want to** define canonical architectural layer types (e.g., presentation, domain, infrastructure),
**so that** teams have standardized layer conventions for code organization and automation actions can reference these layers.

## Context

Organizations adopt architectural patterns (hexagonal, clean architecture, etc.) with canonical layers. Platform engineers need to define these as layer types so:
- Teams follow consistent directory structures
- Automation actions can target specific layers
- Code generation scaffolds in the correct directories
- Architectural fitness functions can validate layer boundaries

## Road Items

- **ROAD-041** (Taxonomy CRUD Operations) — Implements layer type CRUD

## Acceptance Criteria

1. Platform engineer can create layer types via `POST /api/v1/taxonomy/layer-types`
2. Required fields: name, description
3. Optional fields: defaultLayerDir (e.g., "src/presentation")
4. API returns 201 Created with full layer type object
5. Layer types can be listed via `GET /api/v1/taxonomy/layer-types`
6. Actions can reference layer types via `layerType` field
7. API prevents deletion of layer types referenced by actions (returns 400)
8. Layer types are organization-wide (not system-specific)

## Example Request

```json
POST /api/v1/taxonomy/layer-types

{
  "name": "presentation",
  "description": "HTTP APIs, CLI, UI components",
  "defaultLayerDir": "src/presentation"
}
```

## Example Response

```json
201 Created

{
  "name": "presentation",
  "description": "HTTP APIs, CLI, UI components",
  "defaultLayerDir": "src/presentation"
}
```

## Example Layer Types (Hexagonal Architecture)

```
presentation   → src/presentation  (HTTP, CLI, UI)
application    → src/application   (Use cases, app services)
domain         → src/domain        (Business logic, entities)
infrastructure → src/infrastructure (DB, external APIs)
```

## Use Cases

1. **Code Generation**: `katalyst scaffold controller UserController` → creates in `src/presentation/controllers/`
2. **Dependency Validation**: Ensure presentation doesn't import infrastructure
3. **Action Targeting**: Deploy actions target `application` layer
4. **Documentation**: Auto-generate architecture diagrams

## Related Stories

- **US-049** (Add Systems to Taxonomy) — Creates nodes
- **US-053** (Define Automation Actions) — References layer types

---
id: US-034
title: "Explore Aggregate Hierarchy as Collapsible Tree"
persona: PER-001
status: draft
capabilities:
  - CAP-010
  - CAP-009
use_cases: []
acceptance_criteria:
  - "Aggregate roots display as expandable tree nodes with entity, value object, and field children"
  - "Tree nodes are color-coded by type: Aggregate=blue, Entity=purple, Value Object=green, List=amber"
  - "Field data types displayed inline (e.g., ': str', ': UUID', ': date')"
  - "Optional fields visually indicated with an 'optional' badge"
  - "Descriptions shown on hover for nodes that have them"
  - "Expand All and Collapse All controls available"
  - "Tree supports dark mode"
---

# US-034: Explore Aggregate Hierarchy as Collapsible Tree

**As an** Engineering Team Lead,
**I want to** explore aggregates as a collapsible tree showing entities, value objects, fields, and types,
**so that** I can understand the data structure, identify value objects vs entities, and see which fields are optional.

## Context

The existing aggregates view renders flat cards with tag-style lists of entities, value objects, and commands. This story adds a tree view that mirrors the actual hierarchical structure of an aggregate â€” showing how entities contain value objects, which contain fields with types. This is inspired by the OPR site's AggregateTree component but dynamically driven by the DDD Domain Modeling API (CAP-009).

## Road Items

- **ROAD-017** (Aggregate Tree Hierarchy View)

## Acceptance Criteria

1. Tree renders the aggregate root at the top level
2. Entities, value objects, and lists render as child nodes with type badges
3. Fields render as leaf nodes with inline data type annotations
4. Optional fields show a visual "optional" indicator
5. Nodes with descriptions show them on hover
6. "Expand All" button expands every node; "Collapse All" collapses to root only
7. Clicking a node toggles its expand/collapse state
8. Type badges use consistent colors: Aggregate=blue, Entity=purple, Value Object=green, List=amber
9. Tree works in dark mode
10. Tree is scrollable when content exceeds container height

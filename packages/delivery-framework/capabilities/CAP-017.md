---
id: CAP-017
title: "AI Assessment Coaching"
tag: "@CAP-017"
category: Business
status: stable
description: "Context-aware AI coaching for FOE assessment results via streaming chat interface with full report context injection."
---

# CAP-017: AI Assessment Coaching

## Description

The system provides a context-aware AI coaching experience for FOE assessment results. When a user selects an FOE project and navigates to the Chat tab, a streaming chat interface loads with the full report context — scores, dimension breakdowns, findings, gaps, and triangle diagnosis — pre-injected as a preamble to the AI agent conversation.

The chat interface is modeled after the existing DDDChat component and uses Server-Sent Events (SSE) for real-time token streaming. A dedicated `foe-assessment-coach` agent is configured with a system prompt tuned for FOE methodology coaching, referencing Field Guide methods and observations to ground its recommendations in the framework's knowledge base.

Starter suggestion cards provide four contextual entry points (e.g., "Why is my Feedback score low?", "What should I prioritize first?", "Explain my triangle diagnosis", "How do I improve test confidence?") that adapt based on the report's actual scores and gaps. The agent maintains conversation context across messages within a session, enabling natural follow-up questions.

## Key Features

- **FOE Chat Component**: SSE streaming chat interface modeled after DDDChat, with message history, typing indicators, and markdown rendering
- **Report Context Injection**: Full report data (scores, dimensions, findings, gaps, triangle diagnosis) injected as a structured preamble before the first user message
- **Starter Suggestions**: 4 contextual question cards that adapt based on the report's actual dimension scores and identified gaps
- **Follow-up Conversations**: Agent maintains conversation context across messages within a session for natural multi-turn dialogue
- **foe-assessment-coach Agent**: System prompt tuned for FOE coaching with Field Guide method references, maturity level guidance, and intervention strategies
- **Not-Connected Handling**: Graceful degradation when the OpenCode server is unavailable, displaying a clear status message and retry option

## Architecture

```
FOEChat.tsx (React Component)
    ↓ SSE connection
OpenCode SSE Client
    ↓ agent dispatch
foe-assessment-coach Agent
    ├── System Prompt (FOE methodology, Field Guide references)
    ├── Report Context (injected preamble)
    └── Conversation History (session-scoped)
```

The FOEChat component establishes an SSE connection to the OpenCode server, which dispatches messages to the `foe-assessment-coach` agent. The agent receives the full report context on first message and maintains conversation state for the duration of the session.

## NFR Requirements

- SSE first-byte latency < 500ms after message submission
- WCAG 2.1 AA compliant (keyboard navigation, screen reader announcements for streaming messages, focus management)
- Dark mode support with readable contrast ratios for chat bubbles
- No PII transmitted in prompts — report data is anonymized (no developer names, commit authors, or file paths containing usernames)

## Personas

- **PER-001** (Engineering Team Lead) — Asks targeted questions about dimension scores and receives coaching on how to improve team practices
- **PER-006** (Non-Technical Stakeholder) — Asks about improvement priorities in plain language and receives jargon-free explanations
- **PER-002** (Platform Engineer) — Performs technical deep-dives on specific findings (e.g., CI pipeline optimization, test coverage strategies)

## Related Capabilities

- **CAP-016** (FOE Project Management) — Provides the project context and sub-navigation tab that hosts the chat interface
- **CAP-008** (Real-time Streaming) — Provides the SSE streaming infrastructure used by the chat component
- **CAP-001** (FOE Report Generation) — Generates the assessment data injected as context into the coaching conversation

## Related Artifacts

- **User Stories**: US-059 (AI Coaching for FOE Assessments)
- **Road Items**: ROAD-031 (AI Assessment Coaching Chat)

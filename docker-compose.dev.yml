# ── Dev overrides — hot reload with source-mounted volumes ───────────────────
# Usage: docker compose -f docker-compose.yml -f docker-compose.dev.yml up --build
#   or:  bun run dev:docker

services:
  app:
    build:
      context: .
      dockerfile: packages/foe-api/Dockerfile
      target: dev
    ports: !override
      - "3001:3001"     # API (Bun --watch)
    volumes:
      # Mount source code for hot reload
      - ./packages/foe-api/src:/app/packages/foe-api/src
      - ./packages/foe-schemas/src:/app/packages/foe-schemas/src
      - foe-data:/app/data
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - PORT=3001
      - NODE_ENV=development
      - LOG_LEVEL=debug
    restart: "no"
